<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Swift&#39;s Yolo‚ùóÔ∏è Operator by larsacus</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Swift&#39;s Yolo‚ùóÔ∏è Operator</h1>
      <h2 class="project-tagline">Be safe.</h2>
      <a href="https://github.com/larsacus/swiftyolo.com" class="btn">View on GitHub</a>
      <a href="https://github.com/larsacus/swiftyolo.com/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/larsacus/swiftyolo.com/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>What is Swift's Yolo! operator? Simply put, this is the bang <g-emoji alias="exclamation" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/2757.png">‚ùóÔ∏è</g-emoji> operator used to force-unwrap optionals. We've all done it -- don't lie. When practicing safe yolo, the Yolo<g-emoji alias="exclamation" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/2757.png">‚ùóÔ∏è</g-emoji> operator can be a fun, healthy way to write code. So are you practicing safe yolo?</p>

<h1>
<a id="why-yolo" class="anchor" href="#why-yolo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why "Yolo"?</h1>

<p>When an optional variable is force-unwrapped "unsafely", we are telling the compiler "Hey bro, don't worry about this variable -- I know better than you do. Yolo. ¬Ø\<em>(„ÉÑ)</em>/¬Ø" This is the programming equivalent of "here, hold my beer -- watch this". You will get to know this line of code shortly because there is an excellent chance you will see it again in a crash report with the name <code>EXC_BREAKPOINT</code>.</p>

<h1>
<a id="type-of-yolo" class="anchor" href="#type-of-yolo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Type of Yolo</h1>

<h2>
<a id="Ô∏è-safe-yolo" class="anchor" href="#%EF%B8%8F-safe-yolo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><g-emoji alias="warning" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/26a0.png">‚ö†Ô∏è</g-emoji> Safe Yolo</h2>

<p>"Safe" yolo is using force-unwrap in places where the only reason it should crash your application is because of a programming or "developer" error. It is a contractual agreement you are entering into with the compiler that you know what's up. A calculated risk.</p>

<h2>
<a id="-unsafe-yolo" class="anchor" href="#-unsafe-yolo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><g-emoji alias="boom" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4a5.png">üí•</g-emoji> Unsafe Yolo</h2>

<p>Unsafe yolo is force-unwrapping optionals because you "need a non-optional" or "this will never be nil". If it will "never be nil", then make it a non-optional -- it's an optional for a reason. Using yolo unsafely should be met with the assumption that when something goes wrong, the "expected behavior" is to crash. Good thing you know every single failure path in your application, because you've just opted the compiler out of caring about it.</p>

<h2>
<a id="-mitigated-yolo" class="anchor" href="#-mitigated-yolo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><g-emoji alias="white_check_mark" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/2705.png">‚úÖ</g-emoji> Mitigated Yolo</h2>

<p>Mitigated yolo is yolo that has been removed in favor of proper use of either formally optional/non-optional storage. This allows the compiler to completely fact-check your work automatically, at least for expectations around object initialization. Normally these cases require explicit error handling around "failure" cases when optionals are nil.</p>

<h2>
<a id="-silent-yolo" class="anchor" href="#-silent-yolo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><g-emoji alias="scream" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f631.png">üò±</g-emoji> Silent Yolo</h2>

<p>Mitigated yolo cases in which a formal optional has been used, but your nil failure cases are left entirely un-handled.</p>

<h1>
<a id="some-examples-of-yolo" class="anchor" href="#some-examples-of-yolo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Some Examples of Yolo</h1>

<h2>
<a id="storyboard-unpacking" class="anchor" href="#storyboard-unpacking" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Storyboard Unpacking</h2>

<p>Let's get this one out of the way since it's going to come up.</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">@IBOutlet</span> <span class="pl-k">weak</span> <span class="pl-k">var</span> MyButton: UIButton‚ùóÔ∏è</pre></div>

<p>When you create an IBOutlet from a storyboard or a xib, Xcode will create this little gem.</p>

<p><g-emoji alias="warning" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/26a0.png">‚ö†Ô∏è</g-emoji> This is as "safe" yolo as you are going to get as the storyboard unpacking system has more knowledge about the system it is building than the compiler does. If these variables are nil when you try and access them, there are only a few possibilities:</p>

<ol>
<li>You are accessing them before <code>awakeFromNib</code> has been called</li>
<li>You didn't connect that <code>IBOutlet</code> to your storyboard</li>
</ol>

<p>These are both <em>programmer errors</em> and <em>should</em> crash your application.</p>

<h2>
<a id="we-are-given-an-optional-from-somewhere" class="anchor" href="#we-are-given-an-optional-from-somewhere" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>We are given an optional from... somewhere</h2>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">func</span> <span class="pl-en">completionCallback</span>(optionalObject: <span class="pl-c1">Any</span>?, error: <span class="pl-c1">ErrorType</span>?) {
    <span class="pl-k">guard</span> error <span class="pl-k">==</span> <span class="pl-c1">nil</span> <span class="pl-k">else</span> {
        <span class="pl-c">// handle the error</span>
        <span class="pl-k">return</span>
    }

    <span class="pl-c">// do some processing</span>
    <span class="pl-k">self</span><span class="pl-k">.</span>nonOptionalFunc(<span class="pl-k">optional</span>‚ùóÔ∏è)
}</pre></div>

<p>Someone (of course not you) has indicated that some variable is "optional" and you want to pass it into a function that requires a non-optional parameter.</p>

<p><g-emoji alias="white_check_mark" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/2705.png">‚úÖ</g-emoji> Let's mitigate this by using <code>if let</code> and explicitly handling both logical branches:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">func</span> <span class="pl-en">completionCallback</span>(optionalObject: <span class="pl-c1">Any</span>?, error: <span class="pl-c1">ErrorType</span>?) {
    <span class="pl-k">guard</span> error <span class="pl-k">==</span> <span class="pl-c1">nil</span> <span class="pl-k">else</span> {
        <span class="pl-c">// handle the error</span>
        <span class="pl-k">return</span>
    }

    <span class="pl-k">if</span> <span class="pl-k">let</span> unwrappedOptional <span class="pl-k">=</span> <span class="pl-k">optional</span> {
        <span class="pl-c">// do some processing</span>
        <span class="pl-k">self</span><span class="pl-k">.</span>nonOptionalFunc(unwrappedOptional)
    } <span class="pl-k">else</span> {
        <span class="pl-c">// explicitly handle this case since something clearly went wrong</span>
    }
}</pre></div>

<h2>
<a id="inline-optionals" class="anchor" href="#inline-optionals" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Inline optionals</h2>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> width: CGFloat <span class="pl-k">=</span> <span class="pl-k">self</span><span class="pl-k">.</span>imageCache<span class="pl-k">.</span>imageForKey(imageKey)‚ùóÔ∏è<span class="pl-k">.</span>size<span class="pl-k">.</span>width</pre></div>

<p>This is likely the most common occurrence of yolo in your codebase. <em>Something</em> will break here at some point in the future. Go on, do a quick audit of your codebase for <code>!.</code>. I'll wait.</p>

<p><img src="https://raw.githubusercontent.com/larsacus/swiftyolo.com/gh-pages/yolo-1.png" alt="Many yolos"></p>

<p>Unfortunately, you're probably not going to like this one very much. Depending on how important or "required" the result of the work you are performing, you'll have to handle it in a couple of different ways:</p>

<p><g-emoji alias="white_check_mark" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/2705.png">‚úÖ</g-emoji> Explicitly handle the failure</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> width: CGFloat
<span class="pl-k">if</span> <span class="pl-k">let</span> cachedImage <span class="pl-k">=</span> <span class="pl-k">self</span><span class="pl-k">.</span>imageCache<span class="pl-k">.</span>imageForKey(imageKey) {
    width <span class="pl-k">=</span> cachedImage<span class="pl-k">.</span>size<span class="pl-k">.</span>width
} <span class="pl-k">else</span> {
    <span class="pl-c">// Handle "failure" here</span>
}</pre></div>

<p><g-emoji alias="scream" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f631.png">üò±</g-emoji> Silently -- or, "don't care yolo"</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">var</span> width: CGFloat <span class="pl-k">=</span> <span class="pl-c1">0</span><span class="pl-k">.</span><span class="pl-c1">0</span>
<span class="pl-k">if</span> <span class="pl-k">let</span> cachedImage <span class="pl-k">=</span> <span class="pl-k">self</span><span class="pl-k">.</span>imageCache<span class="pl-k">.</span>imageForKey(imageKey) {
    width <span class="pl-k">=</span> cachedImage<span class="pl-k">.</span>size<span class="pl-k">.</span>width
}</pre></div>

<h2>
<a id="weak-storage" class="anchor" href="#weak-storage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Weak Storage</h2>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">weak</span> <span class="pl-k">var</span> delegate: UITableViewDelegate‚ùóÔ∏è</pre></div>

<p>When defining storage properties using weak storage, you should <em>never</em>* yolo these properties. <code>weak</code> storage are auto-zeroing properties that can become nil at any time when their owners release them.</p>

<p>You are entering into a contract with the compiler that you cannot in any way fulfill without intimate knowledge of the owner of <code>delegate</code>.</p>

<p><g-emoji alias="white_check_mark" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/2705.png">‚úÖ</g-emoji> This is a no-yolo situation that should be handled correctly with optionals:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">weak</span> <span class="pl-k">var</span> delegate: UITableViewDelegate?</pre></div>

<h2>
<a id="type-casting" class="anchor" href="#type-casting" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Type Casting</h2>

<h2>
<a id="throwing-errors" class="anchor" href="#throwing-errors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Throwing Errors</h2>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">try</span>‚ùóÔ∏è errorThrowingProcessing(ofObject: obj)</pre></div>

<p>Even if this is "temporary" code -- both you and I know this will make it into production. You're entering into a contract here where failures that result from this function choking will be met with an application crash.</p>

<p><g-emoji alias="white_check_mark" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/2705.png">‚úÖ</g-emoji> Properly handle the error flow</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">do</span> {
    <span class="pl-k">try</span> errorThrowingProcessing(ofObject: obj)
}
<span class="pl-k">catch</span> {
    <span class="pl-c">// Handle error or rethrow -- it was thrown for a reason</span>
}</pre></div>

<p><g-emoji alias="warning" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/26a0.png">‚ö†Ô∏è</g-emoji> The safe yolo path here would be that the application <em>should</em> crash. Instances such as unpacking a resource from the bundle. If it doesn't exist, the bundle has in some way been damaged.</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> resource <span class="pl-k">=</span> <span class="pl-k">try</span>‚ùóÔ∏è unpackCriticalBundledResourceWithName(resourceName)</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/larsacus/swiftyolo.com">Swift&#39;s Yolo‚ùóÔ∏è Operator</a> is maintained by <a href="https://github.com/larsacus">larsacus</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
